<html>
    <head>
        <!--you can ignore this -->
    <script defer>
      'use strict' ; 
      console.log('start of the preview')    
      var sentenceSTRG =  []
      var CHECKEDTRUETABLE = []
      var INTERVAL = setInterval(checkboxcheck , 1000)
       function innerHTML(id , message){
        document.getElementById(id).innerHTML = message ;
      }
       
      function duplicateList(){
         var sentence = document.getElementsByName('write')[0].value
         const  p = document.createElement('p');
         const box = document.createElement('input');
         const span = document.createElement('span')  ;
         document.getElementById('listbody').appendChild(p)  ;
         p.className = 'allchecks'
         p.appendChild(box) ;
         p.appendChild(span) ;
         box.type = 'checkbox' ;
         box.className = 'box'
         span.innerHTML = sentence ;
         
         
      }
      function delList(){
         document.querySelectorAll('.allchecks').forEach(element => element.remove());
         sentenceSTRG.length = 0
         localStorage.clear()
      }
      window.onload =  function windows(){
           sentenceSTRG =  []
           CHECKEDTRUETABLE = []
        var  recover = JSON.parse(localStorage.getItem('sentencestorage')) 
        recover.forEach(element => iterateStored(element))  
        var checked = JSON.parse(localStorage.getItem('checked')) 
        const ALLCHECKS = document.getElementsByClassName('boxes')
        for (let i = 0 ; i < ALLCHECKS.length  ; i ++){
           ALLCHECKS[i].checked = checked[i]
        }
        
      }
      function iterateStored(sentence) {
        if (sentence != null){
            const  p = document.createElement('p');
            const box = document.createElement('input');
            const span = document.createElement('span')  ;
            document.getElementById('listbody').appendChild(p)  ;
            p.className = 'allchecks'
            p.appendChild(box) ;
            p.appendChild(span) ;
            box.type = 'checkbox' ;
            box.className = 'boxes'
            span.innerHTML = sentence ;
            sentenceSTRG.push(sentence) ;
            var storesentences =  localStorage.setItem('sentencestorage' , JSON.stringify(sentenceSTRG)) ;}

      }
      function checkboxcheck(){
          CHECKEDTRUETABLE = []
          document.querySelectorAll('.boxes').forEach(element => CHECKEDTRUETABLE.push(element.checked))
          var CHECKEDSTORAGE = localStorage.setItem('checked' ,JSON.stringify(CHECKEDTRUETABLE))
       }
      function SaveAll(){
        var sentence = document.getElementsByName('write')[0].value
        if (sentence && !sentenceSTRG.includes(sentence)) {
    sentenceSTRG.push(sentence);
    localStorage.setItem('sentencestorage', JSON.stringify(sentenceSTRG));
    checkboxcheck();
}
      }
         
      function  del(){
        document.getElementsByName('write')[0].value = ' '
      }
      
      
    </script>
    <style>
        *{
            font-family:cursive;
        }
        .dups {
            color :cyan

        }
        input[name = write]{border: 3px solid aqua; border-radius: 30px;}
        #duplicator1{
            visibility: hidden;
        }
    </style>
    </head>
    <body>
       <h2>My To do list : </h2>
       <button onclick="SaveAll()">save</button>
       <p id="output"></p>
       <label for="write">Type Here :</label>
       <input type="text" name="write"> <button onclick="duplicateList()">type</button>
       <button onclick="del()">del</button>
       <div id="listbody">

       </div>
       <br><br><button onclick="delList(true)">clear all</button>
         
      
    </body>
</html>